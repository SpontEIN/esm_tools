# MPIOM YAML CONFIGURATION FILE
#

model: mpiom

metadata:
        Institute: MPI-Met
        Description:
                The ocean-sea ice component of the MPI-ESM. MPIOM is a primitive equation
                model (C-Grid, z-coordinates, free surface) with the hydrostatic and
                Boussinesq assumptions made.
        Authors: Till Maier-Reimer, Helmuth Haak, Johann Jungclaus
        Publications:
                - "Characteristics of the ocean simulations in the Max Planck Institute Ocean Model (MPIOM) the ocean component of the MPI-Earth system model <https://doi.org/10.1002/jame.20023>"
                - "The Max-Planck-Institute global ocean/sea ice model with orthogonal curvilinear coordinates <https://doi.org/10.1016/S1463-5003(02)00015-X>"
        License:
                Please make sure you have a licence to use MPIOM. In case you are unsure,
                please contact redmine...

executable: mpiom

setup_dir: "${model_dir}"

resolution: GR15

choose_computer.name:
        ollie:
                compiletime_environment_changes:
                        add_export_vars:
                                - 'CFLAGS="-O2 -DgFortran -std=gnu99 -xHost"'
                                - 'FCFLAGS="-O3 -fpe0 -i4 -fp-model source -fast-transcendentals -no-prec-sqrt -xHost -heap-arrays -convert big_endian -fpp"'
                                - 'FFLAGS="$FCFLAGS"'
                                - 'ARFLAGS=crv'
                                - 'WLFLAG="-Wl"'
                                - 'OASIS3MCT_FC_LIB="-L$NETCDFFROOT/lib -lnetcdff"'
                                - 'OASIS3MCTROOT=${general.model_dir}'
                                - 'LIBS="-Wl,-rpath,$NETCDF_DIR/lib:$NETCDF_DIR/lib:$HDF5ROOT/lib:""/lib:${I_MPI_ROOT}/intel64/lib"'
        mistral:
                compiletime_environment_changes:
                        add_module_actions:
                                - "unload gcc"
                                - "load gcc/4.8.2"
                                - "load cdo nco"
                                - "unload netcdf"
                                - "load netcdf_c/4.3.2-gcc48"
                        add_export_vars:
                                - 'CFLAGS="-O2 -DgFortran -std=gnu99"'
                                - 'FCFLAGS="-O3 -fp-model source -fast-transcendentals -no-prec-sqrt -xHost -heap-arrays -convert big_endian -fpp"'
                                - 'HDF5_ROOT="/sw/rhel6-x64/hdf5/hdf5-1.8.14-parallel-impi-intel14/"'
                                - 'NETCDFFROOT="/sw/rhel6-x64/netcdf/netcdf_fortran-4.4.3-intel14"'
                                - 'NETCDFROOT="/sw/rhel6-x64/netcdf/netcdf_c-4.3.2-gcc48"'
                                - 'ARFLAGS=crv'
                                - 'WLFLAG="-Wl"'
                                - 'OASIS3MCT_FC_LIB="-L$NETCDFFROOT/lib -lnetcdff"'
                                - 'OASIS3MCTROOT=${general.model_dir}'
                                - 'LIBS="-Wl,-rpath,$NETCDFFROOT/lib:$NETCDFROOT/lib:$HDF5ROOT/lib:$SZIPROOT/lib:$MPIROOT/lib"'
                                - 'LD_LIBRARY_PATH="/sw/rhel6-x64/grib_api/grib_api-1.15.0-intel14/lib:$NETCDFFROOT/lib:$HDF5ROOT/lib:$NETCDFROOT/lib:$SZIPROOT/lib:$PROJ4_ROOT/lib:$LD_LIBRARY_PATH"'
